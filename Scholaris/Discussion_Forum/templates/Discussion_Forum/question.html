{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <title>{% block title %} {% endblock %} </title>
    <style>
        div .card{
            margin:40px;
            border: 0px;
        }
        div .card-answer{
            border: 0px;
        }
    </style>
  </head>
  <body>

    <header>
        <nav class="navbar navbar-expand-sm bg-info navbar-dark">
          <ul class="navbar-nav">
            <li class="nav-item active">
              <a class="nav-link" href="#">Active</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Link</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Link</a>
            </li>
            <li class="nav-item">
              <a class="nav-link disabled" href="#">Disabled</a>
            </li>
          </ul>
        </nav>
    </header>

    <div class="container">
    <div>
    {% block content %}{% endblock %}
    </div>
    <div>
        <button data-toggle="collapse" data-target="#ans-card" class="btn btn-outline-info justify-content-center" >Answer</button>
    </div>
    <div class="card collapse card-answer" id="ans-card">
        <form action="">
            <div class="form-group">
                <label for="question">Answer:</label>
                <textarea class="form-control" rows="5" id="question" name="text" placeholder="Answer is"></textarea>
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>
    </div>


    <hr>
    <h4 class="text ml-5">3 Answers</h4>
    <hr>

    <div class="card">
      <!-- Left-aligned media object -->
      <div class="media">
        <div class="media-left">
          <img src="{% static 'forum/images/img.png'%}" class="media-object rounded mx-md-4" style="width:60px">
        </div>
        <div class="media-body">
          <h4 class="media-heading">JOHN<small class="text text-secondary"><i>  Posted on February 20, 2016</i></small></h4>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
        </div>
      </div>
      <!-- upvotes & downvotes-->
        <div class="row">
            <div class="ml-md-4">
                <div type="button" class="btn btn-success mr-md-0" >Upvote</div>
                <div  class="btn btn-success mx-md-0">4</div>
            </div>
            <div class ="ml-md-4">
                <button type="button" class="btn btn-danger mr-md-0">Downvote</button>
                <div  class="btn btn-danger mx-md-0">2</div>
            </div>
        </div>
      <hr>
    </div>

    <div class="card" >
      <!-- Left-aligned media object -->
        <div class="media">
            <div class="media-left">
              <img src="{% static 'forum/images/img.png'%}" class="media-object rounded mx-md-4" style="width:60px">
            </div>
            <div class="media-body">
              <h4 class="media-heading">JOHN<small class="text text-secondary"><i>  Posted on February 20, 2016</i></small></h4>
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
            </div>

        </div>
        <!-- upvotes & downvotes-->
        <div class="row">
            <div class="ml-md-4">
                <div type="button" class="btn btn-success mr-md-0" >Upvote</div>
                <div  class="btn btn-success mx-md-0">4</div>
            </div>
            <div class ="ml-md-4">
                <button type="button" class="btn btn-danger mr-md-0">Downvote</button>
                <div  class="btn btn-danger mx-md-0">2</div>
            </div>
        </div>
      <hr>
    </div>

    <div class="card" >
      <!-- Left-aligned media object -->
      <div class="media">
        <div class="media-left">
            <img src="{% static 'forum/images/img.png'%}" class="media-object rounded mx-md-4" style="width:60px">
        </div>
        <div class="media-body">
            <h4 class="media-heading">JOHN<small class="text text-secondary"><i>  Posted on February 20, 2016</i></small></h4>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
        </div>
      </div>

      <!-- upvotes & downvotes-->
        <div class="row">
            <div class="ml-md-4">
                <div type="button" class="btn btn-success mr-md-0" >Upvote</div>
                <div  class="btn btn-success mx-md-0">4</div>
            </div>
            <div class ="ml-md-4">
                <button type="button" class="btn btn-danger mr-md-0">Downvote</button>
                <div  class="btn btn-danger mx-md-0">2</div>
            </div>
        </div>
      <hr>
    </div>

    </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script type="text/javascript">
        $(document).ready(function(event){
          $(document).on('click', "#upvote", function(event) {
              event.preventDefault();
              var pk = $(this).attr('value');
              $.ajax({
                  type: 'POST',
                  url: '{% url "forum:upvote_post" %}',
                  data: {'id':pk, 'csrfmiddlewaretoken': '{{ csrf_token }}'},
                  dataType: 'json',
                  success: function(response){
                      $('#upvote-section').html(response['form'])
                      console.log($('#upvote-section').html(response['form']));
                  },
                  error: function(rs, e) {
                      console.log(rs.responseText);
                  },
              });
          });
        });
    </script>
  </body>
</html>